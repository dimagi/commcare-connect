{% load i18n %}

<div x-show="{{ modal_name }}" x-cloak x-transition.opacity
    class="fixed inset-0 z-50 flex items-center justify-center modal-backdrop"
    @keydown.escape.window="{{ modal_name }} = false">
    <div @click.outside="{{ modal_name }} = false" class="bg-white rounded-2xl shadow-xl w-full max-w-lg p-6">

        <div class="flex justify-between items-center pb-2 mb-4">
            <h2 class="text-lg font-medium text-brand-deep-purple">
                {{ modal_title }}
            </h2>
            <button @click="{{ modal_name }} = false" class="text-gray-500 hover:text-gray-700">
                <i class="fa-solid fa-xmark text-xl"></i>
            </button>
        </div>

        <div class="mb-6">
            <p class="text-gray-700 mb-2">
                {% blocktrans %}
                    Are you sure you want to delete the
                    <span x-text="selected.length"></span>
                    selected invites?
                {% endblocktrans %}
            </p>
            <p class="text-red-600 text-sm font-medium">
                {% trans "This action is irreversible and cannot be undone." %}
            </p>
        </div>

        <div class="flex justify-end gap-2 pt-4">
            <button type="button" class="button button-md outline-style" @click="{{ modal_name }} = false">
                {% trans 'Cancel' %}
            </button>
            <form hx-post="{% url 'opportunity:delete_user_invites' org_slug=request.org.slug opp_id=opportunity.pk %}"
                  hx-trigger="submit"
                  hx-on::after-request="if(event.detail.xhr.status >= 400) { alert ('{% trans "Oops! Something went wrong. Please try again or contact support." %}') }"
                  class="inline">
                {% csrf_token %}
                <template x-for="id in selected">
                    <input type="hidden" name="user_invite_ids" :value="id">
                </template>
                <button type="submit" class="button button-md bg-red-600 hover:bg-red-700 text-white"
                        @click="{{ modal_name }} = false">
                    <i class="fa-solid fa-trash"></i>
                    {% trans 'Delete Invites' %}
                </button>
            </form>
        </div>
    </div>
</div>
