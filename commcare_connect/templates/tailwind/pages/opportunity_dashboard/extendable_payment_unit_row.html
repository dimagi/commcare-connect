<div class="flex justify-between items-center">
    <span>{{ count }}</span>
    <div x-data="{ expanded: false }">
        {% if edit_button %}
            {{ edit_button|safe }}
        {% endif %}
        <button class="cursor-pointer btn btn-primary btn-sm"
                @click="expanded = true; $el.closest('tr').insertAdjacentHTML('afterend', $refs.detailRow.innerHTML)"
                x-show="!expanded">
            <i class="fa-light fa-chevron-down"></i>
        </button>
        <button class="cursor-pointer btn btn-secondary btn-sm"
                @click.prevent="
                    const detailRow = $el.closest('tr').nextElementSibling;
                    if (detailRow && detailRow.classList.contains('detail-row')) {
                        detailRow.remove();
                    }
                    expanded = false
                "
                x-show="expanded">
            <i class="fa-light fa-chevron-up"></i>
        </button>
        <template x-ref="detailRow">
            <tr class="detail-row">
                <td colspan="8">
                    <div class="p-3 bg-slate-100 rounded-lg">
                        <div class="mb-4">Delivery units</div>
                        <div class="flex gap-16">
                            {{ detail_html|safe }}
                        </div>
                    </div>
                </td>
            </tr>
        </template>
    </div>
</div>
