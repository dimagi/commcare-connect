{% extends "tailwind/base.html" %}

{% block content %}
<div id="content-area" class="md:max-w-screen-2xl mx-auto flex flex-row gap-4 min-h-screen">
   <!-- Left Column -->
   <div class="w-2/3">
      <h2 class="mb-4 text-test-red font-medium text-sm">Programs</h2>
      <div class="flex flex-col gap-4">
         {% for app in program_apps %}
         <div class="bg-white p-6 rounded-lg shadow-lg relative">
            <div class="absolute -top-1 left-4 h-[8px] w-[26px] bg-orange-400 rounded z-[50]"></div>

            <!-- Header Section -->
            <div class="flex justify-between items-center text-gray-500 text-sm mb-3">
               <div class="flex items-center gap-3">
                  <span>{{ app.date_created|date:"d M, Y" }}</span>
                  <span class="flex items-center">
                     <span class="text-orange-400 text-lg mx-1">â€¢</span>
                     {{ app.program__organization__name }}
                  </span>
               </div>
               <span class="bg-[#FEAF31] text-[#16006D] text-sm px-3 py-1 rounded-full">
                  {{ app.status|title }}
               </span>
            </div>

            <!-- Program Name -->
            <h3 class="text-xl font-bold text-indigo-900">{{ app.program__name }}</h3>

            <!-- Description -->
            <p class="text-gray-500 text-sm mt-2">
               {{ app.program__description|default:"No description available." }}
            </p>

            <!-- Program Details -->
            <div class="flex items-center justify-between mt-4">
               <div class="flex items-center gap-8">
                  <!-- Delivery Type -->
                  <div>
                     <p class="text-gray-400">Delivery Type</p>
                     <p class="font-bold text-blue-900">{{ app.program__delivery_type__name }}</p>
                  </div>

                  <!-- Dates -->
                  <div class="flex items-center gap-4">
                     <div>
                        <p class="text-gray-400">Start Date</p>
                        <p class="font-bold text-blue-900">{{ app.program__start_date|date:"d-M-Y" }}</p>
                     </div>
                     <div>
                        <p class="text-gray-400">End Date</p>
                        <p class="font-bold text-blue-900">{{ app.program__end_date|date:"d-M-Y" }}</p>
                     </div>
                  </div>
               </div>

               <!-- Apply Button -->
               <button class="bg-brand-indigo text-white px-8 py-2 rounded-lg shadow-md hover:bg-blue-800 transition">
                  Apply
               </button>
            </div>
         </div>
         {% empty %}
         <p class="text-gray-500">No programs found.</p>
         {% endfor %}
      </div>
   </div>

   <!-- Right Column -->
   <div class="w-1/3">
      <div class="mb-4 text-brand-deep-purple font-medium text-sm">Recent Activities</div>
      <div class="bg-gray-100 rounded-lg overflow-y-hidden hover:overflow-y-auto">
         <div class="flex flex-col gap-4">
            {% include 'tailwind/components/cards/activity_card.html' with title="Visits Pending Review" rows=review_counts icon="fa-clock-rotate-left" %}
            {% include 'tailwind/components/cards/activity_card.html' with title="Pending Payment" rows=pending_payments icon="fa-hand-holding-dollar" %}
            {% include 'tailwind/components/cards/activity_card.html' with title="Inactive Workers" rows=inactive_workers icon="fa-user-slash" %}
         </div>
      </div>
   </div>
</div>
{% endblock %}
