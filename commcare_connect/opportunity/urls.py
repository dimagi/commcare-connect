from django.urls import path

from commcare_connect.opportunity import tw_views, views
from commcare_connect.opportunity.tw_views import OpportunityListView
from commcare_connect.opportunity import tw_form_views, tw_views, views
from commcare_connect.opportunity.views import (
    OpportunityCompletedWorkTable,
    OpportunityCreate,
    OpportunityDeliverStatusTable,
    OpportunityDetail,
    OpportunityEdit,
    OpportunityFinalize,
    OpportunityInit,
    OpportunityLearnStatusTableView,
    OpportunityList,
    OpportunityPaymentTableView,
    OpportunityPaymentUnitTableView,
    OpportunityUserLearnProgress,
    OpportunityUserStatusTableView,
    UserPaymentsTableView,
    add_budget_existing_users,
    add_budget_new_users,
    add_payment_unit,
    add_payment_units,
    approve_visit,
    delete_form_json_rule,
    download_export,
    edit_payment_unit,
    export_catchment_area,
    export_completed_work,
    export_deliver_status,
    export_status,
    export_user_status,
    export_user_visits,
    export_users_for_payment,
    fetch_attachment,
    get_application,
    import_catchment_area,
    opportunity_user_invite,
    payment_delete,
    payment_import,
    payment_report,
    reject_visit,
    resend_user_invite,
    review_visit_export,
    review_visit_import,
    revoke_user_suspension,
    send_message_mobile_users,
    suspend_user,
    suspended_users_list,
    sync_deliver_units,
    update_completed_work_status_import,
    update_visit_status_import,
    user_profile,
    user_visit_review,
    user_visits_list,
    verification_flags_config,
    visit_verification,
)

app_name = "opportunity"
urlpatterns = [
    path("", view=OpportunityList.as_view(), name="list"),
    path("create/", view=OpportunityCreate.as_view(), name="create"),
    path("init/", view=OpportunityInit.as_view(), name="init"),
    path("<int:pk>/finalize/", view=OpportunityFinalize.as_view(), name="finalize"),
    path("<int:pk>/edit", view=OpportunityEdit.as_view(), name="edit"),
    path("<int:pk>/", view=OpportunityDetail.as_view(), name="detail"),
    path("<int:pk>/user_table/", view=OpportunityLearnStatusTableView.as_view(), name="user_table"),
    path("<int:pk>/user_status_table/", view=OpportunityUserStatusTableView.as_view(), name="user_status_table"),
    path("<int:pk>/visit_export/", view=export_user_visits, name="visit_export"),
    path("<int:pk>/review_visit_export/", view=review_visit_export, name="review_visit_export"),
    path("<int:pk>/review_visit_import/", view=review_visit_import, name="review_visit_import"),
    path("export_status/<slug:task_id>", view=export_status, name="export_status"),
    path("download_export/<slug:task_id>", view=download_export, name="download_export"),
    path("<int:pk>/visit_import/", view=update_visit_status_import, name="visit_import"),
    path(
        "<int:opp_id>/learn_progress/<int:pk>",
        view=OpportunityUserLearnProgress.as_view(),
        name="user_learn_progress",
    ),
    path(
        "<int:pk>/add_budget_existing_users",
        view=add_budget_existing_users,
        name="add_budget_existing_users",
    ),
    path(
        "<int:pk>/add_budget_new_users",
        view=add_budget_new_users,
        name="add_budget_new_users",
    ),
    path("<int:pk>/payment_table/", view=OpportunityPaymentTableView.as_view(), name="payment_table"),
    path("<int:pk>/payment_export/", view=export_users_for_payment, name="payment_export"),
    path("<int:pk>/payment_import/", view=payment_import, name="payment_import"),
    path("<int:pk>/payment_unit/create", view=add_payment_unit, name="add_payment_unit"),
    path("<int:pk>/payment_units/create", view=add_payment_units, name="add_payment_units"),
    path("<int:pk>/payment_unit_table/", view=OpportunityPaymentUnitTableView.as_view(), name="payment_unit_table"),
    path("<int:opp_id>/payment_unit/<int:pk>/edit", view=edit_payment_unit, name="edit_payment_unit"),
    path("<int:opp_id>/user_payment_table/<int:pk>", view=UserPaymentsTableView.as_view(), name="user_payments_table"),
    path("<int:pk>/user_status_export/", view=export_user_status, name="user_status_export"),
    path("<int:pk>/deliver_status_table/", view=OpportunityDeliverStatusTable.as_view(), name="deliver_status_table"),
    path("<int:pk>/deliver_status_export/", view=export_deliver_status, name="deliver_status_export"),
    path("<int:opp_id>/user_visits/<int:pk>/", view=user_visits_list, name="user_visits_list"),
    path("<int:opp_id>/payment/<int:access_id>/delete/<int:pk>/", view=payment_delete, name="payment_delete"),
    path("<int:opp_id>/user_profile/<int:pk>/", view=user_profile, name="user_profile"),
    path("<int:pk>/send_message", view=send_message_mobile_users, name="send_message_mobile_users"),
    path("applications/", get_application, name="get_applications_by_domain"),
    path("verification/<int:pk>/", view=visit_verification, name="visit_verification"),
    path("approve/<int:pk>/", view=approve_visit, name="approve_visit"),
    path("reject/<int:pk>/", view=reject_visit, name="reject_visit"),
    path("fetch_attachment/<blob_id>", view=fetch_attachment, name="fetch_attachment"),
    path("<int:pk>/completed_work_table/", view=OpportunityCompletedWorkTable.as_view(), name="completed_work_table"),
    path("<int:pk>/completed_work_export/", view=export_completed_work, name="completed_work_export"),
    path("<int:pk>/completed_work_import/", view=update_completed_work_status_import, name="completed_work_import"),
    path("<int:pk>/verification_flags_config/", view=verification_flags_config, name="verification_flags_config"),
    path("<int:pk>/suspended_users/", view=suspended_users_list, name="suspended_users_list"),
    path("<int:opp_id>/suspend_user/<int:pk>/", view=suspend_user, name="suspend_user"),
    path("<int:opp_id>/revoke_user_suspension/<int:pk>/", view=revoke_user_suspension, name="revoke_user_suspension"),
    path("<int:opp_id>/delete_form_json_rule/<int:pk>/", view=delete_form_json_rule, name="delete_form_json_rule"),
    path("<int:pk>/catchment_area_export/", view=export_catchment_area, name="catchment_area_export"),
    path("<int:pk>/catchment_area_import/", view=import_catchment_area, name="catchment_area_import"),
    path("<int:pk>/payment_report/", payment_report, name="payment_report"),
    path("<int:opp_id>/user_visit_review/", user_visit_review, name="user_visit_review"),
    path("<int:pk>/user_invite/", view=opportunity_user_invite, name="user_invite"),
    path("<int:pk>/invoice/", views.invoice_list, name="invoice_list"),
    path("<int:pk>/invoice_table/", views.PaymentInvoiceTableView.as_view(), name="invoice_table"),
    path("<int:pk>/invoice/create/", views.invoice_create, name="invoice_create"),
    path("<int:pk>/invoice/approve/", views.invoice_approve, name="invoice_approve"),
    path("<int:opp_id>/user_invite_delete/<int:pk>/", views.user_invite_delete, name="user_invite_delete"),
    path("<int:opp_id>/resend_invite/<int:pk>", resend_user_invite, name="resend_user_invite"),
    path("<int:opp_id>/sync_deliver_units/", sync_deliver_units, name="sync_deliver_units"),
    # New tailwind based views
    path("<int:opp_id>/tw/dashboard/", tw_views.dashboard, name="tw_worker"),
    path("<int:opp_id>/tw/pm_dashboard/", tw_views.pm_dashboard, name="pm_dashboard"),
    path("<int:opp_id>/tw/worker/", tw_views.worker, name="tw_worker"),
    path("<int:opp_id>/tw/opportunity/", tw_views.opportunity_dashboard, name="tw_opportunity"),
    path("<int:opp_id>/tw/opportunities_list/", tw_views.opportunities_list, name="tw_opportunities"),
    path("<int:opp_id>/tw/pm_opportunities_list/", tw_views.pm_opportunities_list, name="tw_pm_opportunities"),
    path("tw/opportunities_list_new/", OpportunityListView.as_view(), name="opportunities_list_new"),
    path("<int:opp_id>/tw/worker_learn/", tw_views.worker_learn, name="tw_learn_table"), # TABLE
    path("<int:opp_id>/tw/worker_delivery/", tw_views.worker_delivery, name="tw_delivery_table"),
    path("<int:opp_id>/tw/worker_payments/", tw_views.worker_payments, name="tw_payments_table"),  # TABLE
    path("<int:opp_id>/tw/worker_main/", tw_views.worker_main, name="tw_worker_table"),  # TABLE
    path("<int:opp_id>/tw/get_worker_last_payment/", tw_views.get_worker_last_payment, name="tw_opportunities"),
    path("<int:opp_id>/tw/workers_list/", tw_views.opportunity_worker, name="tw_worker_list"),
    path("<int:opp_id>/tw/import_visit/", tw_views.tw_update_visit_status_import, name="tw_import_visit"),
    path("<int:opp_id>/tw/export_visit/", tw_views.export_visit_status, name="tw_export_visit"),
    path("<int:opp_id>/tw/export_payments/", tw_views.export_users_for_payment, name="tw_export_payments"),
    path("<int:opp_id>/tw/import_payments/", tw_views.payment_import, name="tw_import_payments"),
    path("<int:opp_id>/tw/workers_list/learn_progress", tw_views.opportunity_worker_learn_progress,
         name="tw_opportunity_worker_learn_progress"),
    path("<int:opp_id>/tw/workers_list/payments", tw_views.opportunity_worker_payment,
         name="tw_opportunity_worker_learn_progress"),
    path("<int:pk>/tw/invoice_list/", views.tw_invoice_list, name="tw_invoice_list"),
    path("<int:pk>/tw/invoice_payment_report/", views.tw_payment_report, name="tw_payment_report"),
    path("<int:opp_id>/tw/my_organization/", tw_views.my_organization, name="tw_my_organization"),
    path("<int:opp_id>/tw/add_budget/", tw_views.add_budget, name="tw_add_budget"),
    path("<int:opp_id>/tw/visits/", tw_views.opportunity_visits, name="tw_visits"),  # TODO
    path("<int:opp_id>/tw/create/", tw_views.create_opportunity, name="tw_visits"),  # TODO
    path("<int:opp_id>/tw/onboarding/", tw_views.onboarding, name="tw_onboarding"),
    path("<int:opp_id>/tw/onboarding/welcome", tw_views.welcome, name="tw_welcome"),
    path("<int:opp_id>/tw/onboarding/setup-org", tw_views.onboarding_org, name="tw_setup_org"),
    path("<int:opp_id>/tw/onboarding/invite", tw_views.onboarding_invite, name="tw_invite"),
    # Tables
    path("<int:opp_id>/tw/tables/flagged_workers/", tw_views.flagged_workers, name="tw_flagged_workers"),
    path(
        "<int:opp_id>/tw/tables/opportunities_list/", tw_views.opportunities_list_table_view, name="tw_flagged_workers"
    ),  # TODO
    path(
        "<int:opp_id>/tw/tables/pm_opportunities_list/", tw_views.pm_opportunities_list_table_view, name="pm_opp_list"
    ),
    path("<int:opp_id>/tw/tables/pay_worker", tw_views.pay_worker, name="tw_pay_worker"),
    path("<int:opp_id>/tw/tables/all_invoice", tw_views.all_invoice_table, name="tw_all_invoice"),
    path("<int:opp_id>/tw/tables/invoice_report", tw_views.invoice_report_table, name="tw_invoice_report"),
    path("<int:opp_id>/tw/tables/my_organization_members", tw_views.my_organization_members_table, name="tw_my_organization_members_table"),
    path("<int:opp_id>/tw/tables/learn_app",tw_views.learn_app_table, name="tw_learn_app"),
    path("<int:opp_id>/tw/tables/learn_module",tw_views.learn_module_table, name="tw_learn_module"),
    path("<int:opp_id>/tw/tables/delivery_app",tw_views.delivery_app_table, name="tw_delivery_app"),
    path("<int:opp_id>/tw/tables/deliver_unit",tw_views.deliver_unit_table, name="tw_deliver_unit"),
    path("<int:opp_id>/tw/tables/payment_app",tw_views.payment_app_table, name="tw_payment_app"),
    path("<int:opp_id>/tw/tables/payment_unit",tw_views.payment_unit_table, name="tw_payment_unit"),
    path("<int:opp_id>/tw/tables/worker_flagged_table",tw_views.worker_flagged_table, name="tw_flagged_table"),
    path("<int:opp_id>/tw/tables/worker_review_table",tw_views.worker_review_table, name="tw_review_table"),
    path("<int:opp_id>/tw/tables/worker_revalidate_table",tw_views.worker_revalidate_table, name="tw_revalidate_table"),
    path("<int:opp_id>/tw/tables/worker_approved_table",tw_views.worker_approved_table, name="tw_approved_table"),
    path("<int:opp_id>/tw/tables/worker_rejected_table",tw_views.worker_rejected_table, name="tw_rejected_table"),
    path("<int:opp_id>/tw/tables/worker_all_table",tw_views.worker_all_table, name="tw_all_table"),
    # API
    path("<int:opp_id>/tw/api/payment_app_expand", tw_views.payment_app_table_expand, name="tw_payment_app"),
    path("<int:opp_id>/tw/api/payment_history/", tw_views.payment_history, name="tw_payment_history"),
    path("<int:opp_id>/tw/api/opportunities/", tw_views.opportunities_card, name="tw_opportunities_card"),
    path("<int:opp_id>/tw/api/signup/", tw_views.signup_comp, name="signup_comp"),
    path("<int:opp_id>/tw/api/login/", tw_views.login_comp, name="login_comp"),
    path("<int:opp_id>/tw/api/create-org/", tw_views.create_org_comp, name="create_org_comp"),
    path("<int:opp_id>/tw/api/setup-org/", tw_views.setup_org_comp, name="setup_org_comp"),
    path("<int:opp_id>/tw/api/email-verify/", tw_views.email_verify_comp, name="email_verify_comp"),
    path("<int:opp_id>/tw/api/password-reset/", tw_views.password_reset_comp, name="password_reset_comp"),
    path("<int:opp_id>/tw/api/password-update/", tw_views.password_update_comp, name="password_update_comp"),
    path("<int:opp_id>/tw/api/invite/", tw_views.invite_comp, name="invite_comp"),
    path("<int:opp_id>/tw/api/pm_cards/", tw_views.pm_opportunities_card, name="tw_pm_cards"),
    path("<int:opp_id>/tw/opportunity_worker/", tw_views.opportunity_worker, name="tw_opportunities"),
    path("<int:opp_id>/tw/visits/", tw_views.opportunity_visits, name="tw_visits"),  # TODO
    path("<int:opp_id>/tw/create/", tw_views.create_opportunity, name="tw_visits"),  # TODO
    # Custom Tailwind Table
    # path("<int:opp_id>/tw/custom_table/", tw_views.custom_table, name="tw_custom_table"),
    # Tables
    path("<int:opp_id>/tw/tables/flagged_workers/", tw_views.flagged_workers, name="tw_flagged_workers"),
    path(
        "<int:opp_id>/tw/tables/opportunities_list/", tw_views.opportunities_list_table_view, name="tw_flagged_workers"
    ),  # TODO
    path(
        "<int:pk>/tw/verification_flags_config/",
        view=tw_form_views.verification_flags_config,
        name="tw_verification_flags_config",
    ),
    path("<int:pk>/tw/edit", view=tw_form_views.OpportunityEdit.as_view(), name="tw_edit"),
    path("<int:pk>/tw/payment_unit/create", view=tw_form_views.add_payment_unit, name="tw_add_payment_unit"),
    path(
        "<int:opp_id>/tw/payment_unit/<int:pk>/edit", view=tw_form_views.edit_payment_unit, name="tw_edit_payment_unit"
    ),
    path(
        "<int:pk>/tw/send_message", view=tw_form_views.send_message_mobile_users, name="tw_send_message_mobile_users"
    ),
    path("<int:pk>/tw/invoice/create/", tw_form_views.invoice_create, name="tw_invoice_create"),
    path(
        "<int:pk>/tw/add_budget_existing_users",
        view=tw_form_views.add_budget_existing_users,
        name="tw_add_budget_existing_users",
    ),
    path("tw/init/", view=tw_form_views.OpportunityInit.as_view(), name="tw_init"),
    path("<int:pk>/tw/finalize/", view=tw_form_views.OpportunityFinalize.as_view(), name="tw_finalize"),
    path("<int:pk>/tw/payment_units/create", view=tw_form_views.add_payment_units, name="tw_add_payment_units"),
    path("<int:pk>/tw/visit_export/", view=tw_form_views.export_user_visits, name="tw_visit_export"),
    path("<int:pk>/tw/invite_user/", view=tw_form_views.opportunity_user_invite, name="tw_invite_user"),
    path("tw_export_status/<slug:task_id>", view=tw_views.export_status, name="tw_export_status"),

]
